<div class="article-page">
  @if (isLoading()) {
    <div class="loading">Загрузка статьи...</div>
  } @else if (error()) {
    <div class="error">
      {{ error() }}
      <a routerLink="/blog" class="back-link">Вернуться к статьям</a>
    </div>
  } @else if (shouldShowContent()) {

    <app-breadcrumbs
      [category]="article()!.category"
      [title]="article()!.title">
    </app-breadcrumbs>

    <div class="article-header-section">

      <div class="article-header-content">
        <header class="article-header">
          <h1 class="article-title">{{ article()!.title }}</h1>
          @if (article()!.description) {
            <p class="article-description">{{ article()!.description }}</p>
          }
        </header>
      </div>

      <div class="article-header-image">
        @if (article()!.image) {
          <div class="article-image">
            <img
              [src]="getImageUrl(article()!.image)"
              [alt]="article()!.title"
            >
          </div>
        }
      </div>

    </div>

    <div class="article-main-section">

      <div class="article-content">
        @if (articleContent()) {
          <div class="article-text" [innerHTML]="articleContent()"></div>
        }

        <div class="article-share">
          <span class="share-label">
            Понравилась статья? Поделитесь ею в своих социальных сетях!
          </span>
          <div class="share-buttons">
            <button
              class="share-btn vk"
              (click)="shareOnVK()"
              aria-label="Поделиться во ВКонтакте"
            >
            </button>
            <button
              class="share-btn facebook"
              (click)="shareOnFacebook()"
              aria-label="Поделиться в Facebook"
            >
            </button>
            <button
              class="share-btn instagram"
              (click)="shareOnInstagram()"
              aria-label="Поделиться в Instagram"
            >
            </button>
          </div>
        </div>

        <div class="article-comments">
          <app-comments [articleId]="article()!.id || ''"></app-comments>
        </div>
      </div>

      <aside class="article-sidebar">
        <app-related-articles [articleUrl]="article()!.url"></app-related-articles>
      </aside>
    </div>
  } @else if (shouldShowNotFound()) {
    <div class="not-found">
      Статья не найдена
      <a routerLink="/blog" class="back-link">Вернуться к статьям</a>
    </div>
  }
</div>
